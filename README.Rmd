---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# hillshader

<!-- badges: start -->
<!-- badges: end -->

The `hillshader` package is a wrapper around `rayshader` to create hillshade relief maps using ray-tracing.

## Installation

You can install the development version of hillshader with the `remotes` package:

``` r
remotes::install_github("pierreroudier/hillshader")
```

## First steps

### The `hillshader` function

```{r load_libs}
library(raster)
library(rayshader)

library(hillshader)
```

```{r mwh}
plot(maungawhau_hr)
```

```{r hillshader}
hs <- hillshader(elevation = maungawhau_hr)
plot_map(hs)
```

### More shaders!

```{r hillshader2}
hs <- hillshader(
  elevation = maungawhau_hr, 
  shader = c("ray_shade", "ambient_shade")
)

plot_map(hs)
```


### Changing sun position

```{r hillshader3}
hs <- hillshader(
  elevation = maungawhau_hr, 
  shader = c("ray_shade", "ambient_shade"),
  sunangle = 180,
  sunaltitude = 25
)

plot_map(hs)
```

### Saving to file

```{r hillshader4, eval=FALSE}
hillshader(
  elevation = maungawhau_hr, 
  shader = c("ray_shade", "ambient_shade"),
  sunangle = 180,
  sunaltitude = 25,
  filename = "hillshade.tif"
)
```

## Advanced use in the `rayshader` pipelines

The `hillshader` package provides three functions that can be used within the `rayshader` pipelines:

- `add_shadow_2d`,
- `matrix_to_raster`,
- `write_raster`

```{r advanced, eval=FALSE}
el_mat <- raster_to_matrix(maungawhau_hr)

el_mat %>% 
  ray_shade %>%
  add_shadow_2d(
    ambient_shade(
      heightmap = el_mat
    )
  ) %>% 
  write_raster(
    elevation = maungawhau_hr,
    filename = "hillshade.tif"
  )
```
